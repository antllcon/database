# Проектирование баз данных

`Нормализация` - проектирование или перестройка структуры таблиц.
Какие 3 формы, что это?

Есть уже наборы правил как перестривать таблицы

`Нормальная форма` - требование, предъявляемое к структуре таблиц в теории реляц. баз данных  для устранения из базы избыточных функциональных зависимостей между атрибутами.

`Первая нормальная форма` (`НФ`) - таблица содержала атомарные значения, то есть на пересечении строки и столбца находилось единственное значение, а не список либо вложенная таблица.

`Атомарные значения` - это атрибуты, которые хранят единственное значение и не являются ни списком, ни множеством значений.

`Ненормализованная сущность` - таблица = сущность.

### Бывает, что первая НФ - нарушена

Это нормально. Есть пример с пользователями, у них профили часто загружены в виде json поля. Это удобно, чтобы легче было добавлять кастомные поля. И обновление и удаление полей - не частая операция. А читать все данные этих полей - нужно часто, а делать это удобно.

### Функциональная зависимость

_Y функционально зависит_ от `X`, если при фиксированных значениях атрибутов `X` однозначно определяются значения атрибутов `Y`.

    f(x) = y

_Полной функциональной зависимостью_ `f(x) = y` считают такую функциональную зависимость, в которой `Y` зависит от всех атрибутов множества `X`, а не от какой-то их части. 

Функциональная зависимость `(Sn, Pn) = Cstatus` является __неполной__, так как существует зависиость Sn -> Cstatus.

### Вторая нормальная форма

Основным способом приведения отношения ко второй НФ является `декомпозиция исходного отношения` на два или более новых отношений.

Отношение R находится во второй нормальной форме, если оно находится в первой НФ и каждый неключевой атрибут функционально полно зависист от любого возможного ключа.

Отношение R - таблица, сущность или таблица R. 

`Транзитивная зависимость` - ряд полей зависят друг от друга (например 1 -> 2 -> 3). Когда значения не ключевых полей зависят от значений других ключевых полей зависят от значений других не клчюевых полей.

Отношение R находится `в третьей НФ`, если оно находится во второй НФ, и каждый неключевой атрибут зависит от любого возможного ключа нетранзитивно.

